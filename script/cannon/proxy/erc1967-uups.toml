name = "universal-upgradeable-proxy"
version = "0.1.0"
preset = "erc1967-upgrade"
description = "Universal Proxy using OpenZeppelin UUPS contracts"

[var.implementation]
implementation = "<%= contracts.UUPSUpgradeableMock.address %>"

[var.salt]
salt = "main"

[var.owner]
owner = "0x8da29648bd3bbef6f0cc1C0b3a9a286ED14E2963"

[var.abi]
abi = "<%= JSON.stringify(contracts.UUPSUpgradeableMock.abi) %>"

[var.initialCallData]
initialCallData = "0x"

[deploy.UUPSUpgradeableMock]
artifact = "UUPSUpgradeableMock"
salt = "<%= settings.salt %>"
create2 = true

[deploy.InitialProxy]
artifact = "ERC1967Proxy"
args = [
  "<%= contracts.UUPSUpgradeableMock.address %>",
  "<%= settings.initialCallData %>"
]
salt = "<%= settings.salt %>"
create2 = true

[invoke.upgrade_proxy_implementation]
target = [ "InitialProxy" ]
from = "<%= settings.owner %>"
abi = "UUPSUpgradeableMock"
func = "upgradeToAndCall"
args = [ "<%= settings.implementation %>", "<%= settings.initialCallData %>" ]

[invoke.upgrade_proxy_implementation.factory.Proxy]
abi = "<%= settings.abi %>"
event = "Upgraded2"
arg = 0
highlight = true